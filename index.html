<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>XRMU</title>
  <meta name="description" content="XRMU">
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/MozillaReality/ammo.js@8bbc0ea/builds/ammo.wasm.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.js"></script>
  <script src="./utils/cell-loop.js"></script>
  <script src="./utils/receptors-animation.js"></script>
  <script src="./utils/cytokine-animation.js"></script>
  <script src="./utils/sky.js"></script>
  <script src="./utils/load-physics.js"></script>
  <script src="./utils/extra-controls.js"></script>
  <script src="./utils/stat-animation.js"></script>
</head>

<body>
  <a-scene>
    <a-assets>
      <!-- Assets -->
      <a-assets-items id="Cytokine" src="./assets/Cytokine.glb"></a-assets-items>
      <a-assets-items id="Cytokine_1" src="./assets/Cytokine_1.glb"></a-assets-items>
      <a-assets-items id="JAK_1" src="./assets/JAK_1.glb"></a-assets-items>
      <a-assets-items id="JAK_2" src="./assets/JAK_2.glb"></a-assets-items>
      <a-assets-items id="STAT_Dimers" src="./assets/STAT_Dimers.glb"></a-assets-items>
      <a-assets-items id="Type_l_Cytokine_Receptor_L" src="./assets/Type_l_Cytokine_Receptor_L.glb"></a-assets-items>
      <a-assets-items id="Type_l_Cytokine_Receptor_R" src="./assets/Type_l_Cytokine_Receptor_R.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_L_Lower"
        src="./assets/Type_ll_Cytokine_Receptor_L_Lower.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_L_Upper"
        src="./assets/Type_ll_Cytokine_Receptor_L_Upper.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_R_Lower"
        src="./assets/Type_ll_Cytokine_Receptor_R_Lower.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_R_Upper"
        src="./assets/Type_ll_Cytokine_Receptor_R_Upper.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_with_bones_4"
        src="./assets/Type_ll_Cytokine_Receptor_with_bones_4.glb"></a-assets-items>
      <a-assets-items id="Type_ll_Cytokine_Receptor_with_bones_animated"
        src="./assets/Type_ll_Cytokine_Receptor_with_bones_animated.glb"></a-assets-items>
      <a-assets-items id="Cytokine_1_fbx" src="./assets/Type ll Cytokine Receptor with bones.fbx"></a-assets-items>
      <a-assets-items id="Cell" src="./assets/Cell.glb"></a-assets-items>
      <a-assets-items id="Plane" src="./assets/plane.glb"></a-assets-items>
      <a-assets-items id="Nuclues" src="./assets/nuclues1.glb"></a-assets-items>
      <a-assets-items id="Stat1" src="./assets/Stat_1.glb"></a-assets-items>
      <a-assets-items id="Stat2" src="./assets/Stat_2.glb"></a-assets-items>
    </a-assets>

    <!-- camera -->
    <!-- <a-camera id="camera" position="0 0.500 5.860" fov="50" zoom="0.5" fly></a-camera> -->
    <a-entity id="rig" movement-controls vertical-movement>
      <a-entity id="camera" camera="fov: 50; zoom:0.5" position="0 0.3 5.860" look-controls></a-entity>
    </a-entity>

    <!-- Plane -->
    <a-entity id="plane" gltf-model="#Plane" rotation="0 180 0" scale="0.5 0.5 0.5" position="0 -0.4 0"></a-entity>

    <!-- Sky -->
    <a-gradient-sky
      material="shader: gradient; topColor: 0.118 0.341 0.6; bottomColor: 0.161 0.537 0.847; offset: 0; exponent: 0.6; side: double;"></a-gradient-sky>
    <!-- light -->
    <a-entity light="" position="27.71359 33.48456 52.87325"></a-entity>
    <a-entity light="color: #BBB; type: ambient"></a-entity>

    <!-- <a-entity gltf-model=" #Plane" geometry="primitive: box;" material="color: gray" position="0 -5 0"
      ammo-body="type: static" ammo-shape="type: box; halfExtents: 5 0.05 5"></a-entity> -->


    <!-- Receptors inside cells -->
    <a-entity id="receptors">
      <a-entity id="receptorGroup1" position="4.851 0 0.000">
        <!-- cytokine -->
        <a-entity id="cytokine1" gltf-model="#Cytokine" scale="0 0 0" position="7.494 26.532 -2.419"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;" color="red"></a-entity>
        <!-- receptors -->
        <a-entity id="receptors1" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 -0.470 -2.621"
          rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine1; dimerID: dimer1;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine1; dimerID: dimer1;"></a-entity>
        <a-entity id="receptors1" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 -0.470 -2.621"
          rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine1; dimerID: dimer1;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine1; dimerID: dimer1;"
          rotation="0 180 0"></a-entity>

        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine1; jakIDs: jak1,jak2;"
          visible="false"></a-entity>

        <!-- Jaks -->
        <a-entity id="jakGroup1">
          <a-entity id="jak1" gltf-model="#JAK_1" position="-44.296 -67.153 19.067" scale="0.600 0.600 0.600"
            move-jak="finalPos: -4.729 -4.317 -3.655;">
            <a-sphere color="yellow" radius="0" position="2.510 1.598 1.354"></a-sphere>
            <a-sphere color="yellow" radius="0" position="4.554 -3.893 1.493"></a-sphere>
          </a-entity>
          <a-entity id="jak2" gltf-model="#JAK_2" position="18.831 -69.037 61.044" scale="0.600 0.600 0.600"
            move-jak="finalPos: 3.655 -4.317 -3.655;">
            <a-sphere color="yellow" radius="0" position="-3.198 1.598 1.354"></a-sphere>
            <a-sphere color="yellow" radius="0" position="-3.950 -3.929 1.493"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Stats -->

        <a-entity id="dimer1" dimers>
          <a-entity id="stat1" gltf-model="#Stat1" position="-49.177 -67.746 -1.368" scale="0.600 0.600 0.600"
            move-stat="jakID: jak1; finalPos: -0.098 -9.271 -1.368; dimerID: dimer1;">
            <a-sphere color="yellow" radius="0" position="-1.542 -1.249 1.445"></a-sphere>
          </a-entity>
          <a-entity id="stat2" gltf-model="#Stat2" position="48.237 -58.702 -1.368" scale="0.600 0.600 0.600"
            move-stat="jakID: jak2; finalPos: 0.192 -8.920 -1.368; rotate: true; dimerID: dimer1;">
            <a-sphere color="yellow" radius="0" position="0.024 -1.191 2.254"></a-sphere>
          </a-entity>
        </a-entity>

      </a-entity>


      <a-entity id="receptorGroup2" position="-11.239 0 -8.229">
        <a-entity id="cytokine2" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine2;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine2;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine2"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine2;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine2;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup3" position="-23.246 0 -0.220">
        <a-entity id="cytokine3" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine3;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine3;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine3"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine3;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine3;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup4" position="18.880 0 -8.578">
        <a-entity id="cytokine4" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine4;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine4;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine4"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine4;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine4;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup5" position="30.842 0 0.020">
        <a-entity id="cytokine5" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine5;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine5;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine5"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine5;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine5;" visible="false"></a-entity>
      </a-entity>
    </a-entity>

    <!-- Receptors outside cells -->
    <a-entity id="outside-receptors" position="0 0 -14.142">
      <a-entity id="receptorGroup6" position="-43.013 0 8.322">
        <a-entity id="cytokine6" gltf-model="#Cytokine" scale="0 0 0" position="7.494 26.532 -2.419"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors1" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine6;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine6;"></a-entity>
        <a-entity id="receptors1" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine6;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine6;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine6;" visible="false"></a-entity>
      </a-entity>


      <a-entity id="receptorGroup7" position="-23.246 0 -5.410">
        <a-entity id="cytokine7" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine7;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine7;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine7"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine7;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine7;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup8" position="4.851 0 -5.410">
        <a-entity id="cytokine8" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine8;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine8;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine8"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine8;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine8;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup9" position="30.842 0 -5.410">
        <a-entity id="cytokine9" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine9;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine9;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine9"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine9;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine9;" visible="false"></a-entity>
      </a-entity>

      <a-entity id="receptorGroup10" position="49.320 0 8.322">
        <a-entity id="cytokine10" gltf-model="#Cytokine" scale="0 0 0" position="-0.241 26.532 23.349"
          move-cytokine="finalPos: -0.241 4.362 -2.419; maxScale: 0.500 0.500 0.500;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.637 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine10;"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine10;"></a-entity>
        <a-entity id="receptors2" gltf-model="#Type_ll_Cytokine_Receptor_with_bones_4" scale="0.600 0.600 0.500"
          position="-0.035 0 -2.621" rotate-bone="boneName: Bone001; angle: 0.1; duration: 1000; cytokineId:cytokine10"
          rotate-bone2="boneName: Bone004; angle: -0.1; duration: 1000; cytokineId:cytokine10;"
          rotation="0 180 0"></a-entity>
        <a-entity light="angle: 55; color: #ffffff; decay: 0; distance: 1; penumbra: 1; type: spot"
          position="-0.32075 4.71496 -0.16735" absorb-cytokine="cytokineId: cytokine10;" visible="false"></a-entity>
      </a-entity>
    </a-entity>

    <!-- Cells -->
    <a-entity id="cell" position="-35.431 -1.353 0"></a-entity>


    <!-- Nuclues -->
    <a-entity id="nuclues-process">
      <a-entity id="nuclues" gltf-model="#Nuclues" position="0 -90 -10" scale="3 3 3"></a-entity>
    </a-entity>


  </a-scene>
</body>

</html>